<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>requestAnimationFrame</title>
	<!-- http://www.zhangxinxu.com/wordpress/2013/09/css3-animation-requestanimationframe-tween-%E5%8A%A8%E7%94%BB%E7%AE%97%E6%B3%95/
		http://www.cnblogs.com/xiaohuochai/p/5777186.html
	 -->
</head>
<body>
	<div id="myDiv" style="background-color: lightblue;width: 0;height: 20px;line-height: 20px;">0%</div>
	<button id="btn">run</button>
	<script>
		var timer;
		btn.onclick = function(){
			myDiv.style.width = '0';
			// cancelAnimationFrame(timer);
			timer = requestAnimationFrame(function fn(){
				if(parseInt(myDiv.style.width) < 500){
					myDiv.style.width = parseInt(myDiv.style.width) + 5 + 'px';
					myDiv.innerHTML =     parseInt(myDiv.style.width)/5 + '%';
					// 相对于setTimeout serInterval优势，自己找到浏览器最优的时间间隔，不用自己写间隔了
					timer = requestAnimationFrame(fn);
				}else{
					cancelAnimationFrame(timer);
				}    
			});
		}
	</script>
</body>
</html>